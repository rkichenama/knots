(()=>{"use strict";var t,e={797:(t,e,s)=>{var i=s(294),n=s(745);class r{constructor(t=1,e=1){this.runs=[],this.fromPin=0,this.toPin=0,this.runs=[],this.fromPin=t,this.toPin=e}append(t){this.runs.push(t)}steps(){let t=[];for(let e=0;e<this.runs.length;e++)0===t.length||t[t.length-1].codingPattern!=this.runs[e]?t.push({codingPattern:this.runs[e],count:1}):t[t.length-1].count++;let e=[];for(let s=0;s<t.length;s++)e.push(`${t[s].codingPattern}${t[s].count>1?t[s].count:""}`);return t.length?e.join(" "):void 0}}function l(t,e){return 0===e?t:l(e,t%e)}class o{constructor({parts:t=5,bights:e=6,sobre:s=!1,pattern:i="\\/"}){this.parts=t,this.bights=e,this.pattern=i||"\\/",this.sobre=!!s,this.solve()}checkConditions(){if(!this.parts||!this.bights)throw"the parts and bights both must be greater than 0";if(1!=l(this.parts,this.bights))throw"the parts and bights must have a greatest common divisor of 1"}fillCoding(){this.coding="";for(let t=0;t<this.parts-1;t++)this.coding+=this.pattern[t%this.pattern.length]}initVars(){this.wholeNumber=Math.floor(this.parts/this.bights),this.remainder=this.parts%this.bights,this.countValue=this.bights-this.remainder,this.cyclicBightNumber=[],this.topCyclicBightNumber=[],this.botCyclicBightNumber=[],this.topCodingPattern=[],this.botCodingPattern=[],this.halfCycles=[],this.pins=[]}fillCbn(){for(let t=0;t<this.bights;t++)this.cyclicBightNumber[t*this.countValue%this.bights]=t;for(let t=0;t<this.parts-1;t++)this.topCyclicBightNumber[t]=this.cyclicBightNumber[(t+1)%this.bights],this.botCyclicBightNumber[this.parts-1-t-1]=this.cyclicBightNumber[(t+1)%this.bights]}getPartFromType(t){return t?this.sobre?"U":"O":this.sobre?"O":"U"}fillUo(){for(let t=0;t<this.parts-1;t++){const e="\\"===this.coding[t];this.topCodingPattern.push(this.getPartFromType(!e)),this.botCodingPattern.push(this.getPartFromType(e))}}fillPins(){this.pins.push(1);let t=2*this.bights;if(this.parts%2)for(let e=1;e<t;e++){const s=e*this.parts%t;this.pins.push(Math.floor(s/2)+1)}else for(let e=1;e<t;e++){const s=e*this.parts%t;this.pins.push(Math.floor(0===s?(e*this.parts+1)%t/2:e%2?s/2:(s+1)/2)+1)}this.pins.push(1)}fillHalfCycles(){let t=new r(this.pins[0],this.pins[1]);this.halfCycles.push(t);for(let e=2;e<=2*this.bights;e++){t=new r(this.pins[e-1],this.pins[e]);const s=(e-2-e%2)/2,[i,n]=e%2?[this.topCodingPattern,this.topCyclicBightNumber]:[this.botCodingPattern,this.botCyclicBightNumber];for(let e=0;e<i.length;e++)n[e]<=s&&t.append(i[e]);this.halfCycles.push(t)}}solve(){this.checkConditions(),this.fillCoding(),this.initVars(),this.fillCbn(),this.fillUo(),this.fillPins(),this.fillHalfCycles()}steps(){let t=[],e=!1;for(const s of this.halfCycles)t.push(`${e?"top":"bot"} pin ${s.fromPin} to ${e?"bot":"top"} pin ${s.toPin}: ${s.steps()??"free run"}`),e=!e;return t}}var a=s(726);const h=window.knot=(0,a.td)(new o({bights:6,parts:5})),c=(0,a.td)("");let p={bights:6,parts:5,sobre:!1,pattern:"\\/"};(()=>{const t=new URLSearchParams(window.location.hash.slice(1)),e=Object.fromEntries(t.entries());for(const t in p)e[t]&&(p[t]=/(bights|parts)/.test(t)?Number(e[t]):/sobre/.test(t)?"true"===e[t]:e[t])})();const u=()=>{const[{bights:t,parts:e,sobre:s,pattern:n},r]=i.useState(p),l=i.useCallback(((t,e)=>{const s=/pattern/.test(t)?e.target.value:/sobre/.test(t)?e.target.checked:e.target.valueAsNumber;r((e=>({...e,[t]:s})))}),[r]);return i.useEffect((()=>{try{c.value="",h.value=new o({bights:t,parts:e,sobre:s,pattern:n});const i=new URLSearchParams;i.set("bights",String(t)),i.set("parts",String(e)),i.set("sobre",String(s)),i.set("pattern",n),location.hash=i.toString()}catch(t){c.value=t.toString()}}),[t,e,s,n]),i.createElement("div",null,i.createElement("label",null,"Bights",i.createElement("input",{type:"number",value:t,min:2,onChange:t=>l("bights",t)})),i.createElement("label",null,"Parts",i.createElement("input",{type:"number",value:e,min:2,onChange:t=>l("parts",t)})),i.createElement("label",null,"Sobre",i.createElement("input",{type:"checkbox",checked:s,onChange:t=>l("sobre",t)})),i.createElement("label",null,"Pattern",i.createElement("input",{type:"text",value:n,onChange:t=>l("pattern",t)})))};var g=s(394);const m=({knot:{topCyclicBightNumber:t,botCyclicBightNumber:e,topCodingPattern:s,botCodingPattern:n,coding:r}})=>i.createElement("div",null,i.createElement("h3",null,"Algorithm Diagram"),i.createElement("table",null,i.createElement("tbody",null,i.createElement(f,{items:s}),i.createElement(f,{items:t}),i.createElement(f,{items:r.split("")}),i.createElement(f,{items:e}),i.createElement(f,{items:n})))),b=g.ZP.td.withConfig({displayName:"Cell",componentId:"sc-1bmbf8h"})`
  text-align: center;
`,f=({items:t})=>i.createElement("tr",null,t.map(((t,e)=>i.createElement(b,{key:`${e}-${t}`},t)))),d=({knot:t})=>i.createElement("div",null,i.createElement("h3",null,"Half Cycles"),i.createElement(v,null,t.steps().map((t=>i.createElement(C,{key:t},t))))),v=g.ZP.ol.withConfig({displayName:"HalfCycleList",componentId:"sc-1cfnhfe"})``,C=g.ZP.li.withConfig({displayName:"HalfCycleRow",componentId:"sc-1awb9co"})``,y=Math.PI/6,E=Math.tan(y),P=()=>{const t=i.useRef(null),e=h.value;return i.useEffect((()=>{t.current&&e&&(N(t.current,e),x(t.current,e),T(t.current,e))}),[e]),i.createElement("div",null,i.createElement("h3",null,"Knot Diagram"),i.createElement(w,null,i.createElement(k,{ref:t})))},w=g.ZP.div.withConfig({displayName:"ResizeContainer",componentId:"sc-jeawg"})`
  overflow: hidden;
  resize: auto;
`,k=g.ZP.canvas.withConfig({displayName:"Canvas",componentId:"sc-1yb1ogh"})`
  position: relative;
  height: 100%;
  width: 100%;
`,N=(t,e)=>{t.height=32*(e.bights-.5),t.parentElement.style.height=`${t.height}px`,t.width=16/E*2*(e.parts/2),t.parentElement.style.width=`${t.width}px`;const s=t.width,i=t.height;t.getContext("2d").clearRect(0,0,s,i)},x=(t,e)=>{const s=t.getContext("2d"),i=t.width,n=t.height,r=n/(e.bights-.5),l=r/2/E*2;s.fillStyle="#573c66",s.strokeStyle="black",s.textAlign="center",s.font="10px sans-serif";const o=e.parts/2,a=e.parts%2;for(let t=0;t<=e.bights;t++){s.lineWidth=1;for(let i=0;i<Math.ceil(o);i++)0===i&&(s.fillText(`${t+1}`,i+15,n-(t*r-3)),s.fillText(`${t+1}`,o*l-15,n-((t+.5*a)*r-3))),s.beginPath(),s.moveTo(i*l+e.parts/2*l,n-(t-o)*r),s.lineTo(i*l,n-t*r),s.lineTo(i*l+e.parts/2*l,n-(t+o)*r),s.stroke(),s.closePath(),s.beginPath(),s.moveTo(i*l-e.parts/2*l,n-(t-o)*r),s.lineTo(i*l,n-t*r),s.lineTo(i*l-e.parts/2*l,n-(t+o)*r),s.stroke(),s.closePath()}s.clearRect(o*l,0,i-o*l,n)},T=(t,e)=>{const s=t.getContext("2d"),i=t.height,n=i/(e.bights-.5),r=n/2/E*2;s.strokeStyle="black";const l=e.parts/2,o=e.parts%2,a=.2*r,h=.2*n,c=(t,e)=>[(t+.4)*r,i-(e+.6)*n],p=(t,e)=>[(t+.9)*r,i-e*n-3],u=([t,e])=>{s.clearRect(t,e,a,h),s.beginPath(),s.moveTo(t,e),s.lineTo(t+a,e+h),s.stroke(),s.closePath()},g=([t,e])=>{s.clearRect(t,e,a,h),s.beginPath(),s.moveTo(t+a,e),s.lineTo(t,e+h),s.stroke(),s.closePath()};for(let t=0;t<e.bights;t++){s.lineWidth=5;const i=e.coding.split("");for(let e=0;e<Math.floor(l);e++)("\\"===i.shift()?u:g)(c(e,t)),(o||e+1<l)&&("\\"===i.shift()?u:g)(p(e,t))}},B=()=>{const t=h.value;return i.createElement(i.Fragment,null,c.value&&i.createElement("h4",null,c.value),i.createElement("h2",null,t.bights,"B x ",t.parts,"P ",t.sobre?"sobre":"casa"," knot"),i.createElement(m,{knot:t}),i.createElement(P,null),i.createElement(d,{knot:t}))},O=document.createElement("section"),S=(0,n.s)(O),$=i.createElement(i.StrictMode,null,i.createElement((()=>i.createElement("div",null,i.createElement(u,null),i.createElement("hr",null),i.createElement(B,null))),null));document.body.appendChild(O),S.render($)}},s={};function i(t){var n=s[t];if(void 0!==n)return n.exports;var r=s[t]={exports:{}};return e[t](r,r.exports,i),r.exports}i.m=e,t=[],i.O=(e,s,n,r)=>{if(!s){var l=1/0;for(c=0;c<t.length;c++){for(var[s,n,r]=t[c],o=!0,a=0;a<s.length;a++)(!1&r||l>=r)&&Object.keys(i.O).every((t=>i.O[t](s[a])))?s.splice(a--,1):(o=!1,r<l&&(l=r));if(o){t.splice(c--,1);var h=n();void 0!==h&&(e=h)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[s,n,r]},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={483:0};i.O.j=e=>0===t[e];var e=(e,s)=>{var n,r,[l,o,a]=s,h=0;if(l.some((e=>0!==t[e]))){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);if(a)var c=a(i)}for(e&&e(s);h<l.length;h++)r=l[h],i.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return i.O(c)},s=self.webpackChunkknots=self.webpackChunkknots||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})(),i.nc=void 0;var n=i.O(void 0,[216],(()=>i(797)));n=i.O(n)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFUyxFQUFpQkMsSUFBWUQsRUFBZ0JDLElBQ3JFRCxFQUFnQkMsR0FBUyxLQUUxQkQsRUFBZ0JDLEdBQVcsRUFFNUIsT0FBT2xDLEVBQW9CTSxFQUFFQyxFQUFPLEVBR2pDbUMsRUFBcUJDLEtBQXdCLGtCQUFJQSxLQUF3QixtQkFBSyxHQUNsRkQsRUFBbUJFLFFBQVFULEVBQXFCVSxLQUFLLEtBQU0sSUFDM0RILEVBQW1CcE0sS0FBTzZMLEVBQXFCVSxLQUFLLEtBQU1ILEVBQW1CcE0sS0FBS3VNLEtBQUtILEcsS0NoRHZGMUMsRUFBb0I4QyxRQUFLL0wsRUNHekIsSUFBSWdNLEVBQXNCL0MsRUFBb0JNLE9BQUV2SixFQUFXLENBQUMsTUFBTSxJQUFPaUosRUFBb0IsT0FDN0YrQyxFQUFzQi9DLEVBQW9CTSxFQUFFeUMsRSIsInNvdXJjZXMiOlsid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvY2h1bmsgbG9hZGVkIiwid2VicGFjazovLy8uL3NyYy9saWIvaGFsZmN5Y2xlLnRzIiwid2VicGFjazovLy8uL3NyYy9saWIvZ2NkLnRzIiwid2VicGFjazovLy8uL3NyYy9saWIva25vdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0YS9DdXJyZW50S25vdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9Lbm90Q29udHJvbHMudHN4Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0FsZ29yaXRobURpYWdyYW0udHN4Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1J1bkxpc3QudHN4Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0tub3RHcmlkLnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9Lbm90RGlzcGxheS50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvQXBwLnRzeCIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvbm9uY2UiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZGVmZXJyZWQgPSBbXTtcbl9fd2VicGFja19yZXF1aXJlX18uTyA9IChyZXN1bHQsIGNodW5rSWRzLCBmbiwgcHJpb3JpdHkpID0+IHtcblx0aWYoY2h1bmtJZHMpIHtcblx0XHRwcmlvcml0eSA9IHByaW9yaXR5IHx8IDA7XG5cdFx0Zm9yKHZhciBpID0gZGVmZXJyZWQubGVuZ3RoOyBpID4gMCAmJiBkZWZlcnJlZFtpIC0gMV1bMl0gPiBwcmlvcml0eTsgaS0tKSBkZWZlcnJlZFtpXSA9IGRlZmVycmVkW2kgLSAxXTtcblx0XHRkZWZlcnJlZFtpXSA9IFtjaHVua0lkcywgZm4sIHByaW9yaXR5XTtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyIG5vdEZ1bGZpbGxlZCA9IEluZmluaXR5O1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRlZmVycmVkLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIFtjaHVua0lkcywgZm4sIHByaW9yaXR5XSA9IGRlZmVycmVkW2ldO1xuXHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgY2h1bmtJZHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdGlmICgocHJpb3JpdHkgJiAxID09PSAwIHx8IG5vdEZ1bGZpbGxlZCA+PSBwcmlvcml0eSkgJiYgT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5PKS5ldmVyeSgoa2V5KSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXy5PW2tleV0oY2h1bmtJZHNbal0pKSkpIHtcblx0XHRcdFx0Y2h1bmtJZHMuc3BsaWNlKGotLSwgMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0aWYocHJpb3JpdHkgPCBub3RGdWxmaWxsZWQpIG5vdEZ1bGZpbGxlZCA9IHByaW9yaXR5O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihmdWxmaWxsZWQpIHtcblx0XHRcdGRlZmVycmVkLnNwbGljZShpLS0sIDEpXG5cdFx0XHR2YXIgciA9IGZuKCk7XG5cdFx0XHRpZiAociAhPT0gdW5kZWZpbmVkKSByZXN1bHQgPSByO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTsiLCJleHBvcnQgY2xhc3MgSGFsZkN5Y2xlIHtcbiAgICBjb25zdHJ1Y3Rvcihmcm9tUGluID0gMSwgdG9QaW4gPSAxKSB7XG4gICAgICAgIHRoaXMucnVucyA9IFtdO1xuICAgICAgICB0aGlzLmZyb21QaW4gPSAwO1xuICAgICAgICB0aGlzLnRvUGluID0gMDtcbiAgICAgICAgdGhpcy5ydW5zID0gW107XG4gICAgICAgIHRoaXMuZnJvbVBpbiA9IGZyb21QaW47XG4gICAgICAgIHRoaXMudG9QaW4gPSB0b1BpbjtcbiAgICB9XG4gICAgYXBwZW5kKHN0ZXApIHsgdGhpcy5ydW5zLnB1c2goc3RlcCk7IH1cbiAgICBzdGVwcygpIHtcbiAgICAgICAgbGV0IGxpc3QgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJ1bnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCB8fCBsaXN0W2xpc3QubGVuZ3RoIC0gMV0uY29kaW5nUGF0dGVybiAhPSB0aGlzLnJ1bnNbaV0pIHtcbiAgICAgICAgICAgICAgICBsaXN0LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBjb2RpbmdQYXR0ZXJuOiB0aGlzLnJ1bnNbaV0sXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiAxLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGlzdFtsaXN0Lmxlbmd0aCAtIDFdLmNvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN0cnMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzdHJzLnB1c2goYCR7bGlzdFtpXS5jb2RpbmdQYXR0ZXJufSR7bGlzdFtpXS5jb3VudCA+IDEgPyBsaXN0W2ldLmNvdW50IDogJyd9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpc3QubGVuZ3RoID8gc3Rycy5qb2luKCcgJykgOiB1bmRlZmluZWQ7XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2NkKHgsIHkpIHtcbiAgICBpZiAoeSA9PT0gMClcbiAgICAgICAgcmV0dXJuIHg7XG4gICAgcmV0dXJuIGdjZCh5LCB4ICUgeSk7XG59XG4iLCJpbXBvcnQgeyBIYWxmQ3ljbGUgfSBmcm9tICcuL2hhbGZjeWNsZSc7XG5pbXBvcnQgZ2NkIGZyb20gJy4vZ2NkJztcbmV4cG9ydCBjbGFzcyBLbm90IHtcbiAgICBjb25zdHJ1Y3Rvcih7IHBhcnRzID0gNSwgYmlnaHRzID0gNiwgc29icmUgPSBmYWxzZSwgcGF0dGVybiA9ICdcXFxcLycgfSkge1xuICAgICAgICB0aGlzLnBhcnRzID0gcGFydHM7XG4gICAgICAgIHRoaXMuYmlnaHRzID0gYmlnaHRzO1xuICAgICAgICB0aGlzLnBhdHRlcm4gPSBwYXR0ZXJuIHx8ICdcXFxcLyc7XG4gICAgICAgIHRoaXMuc29icmUgPSAhIXNvYnJlO1xuICAgICAgICB0aGlzLnNvbHZlKCk7XG4gICAgfVxuICAgIGNoZWNrQ29uZGl0aW9ucygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhcnRzIHx8ICF0aGlzLmJpZ2h0cykge1xuICAgICAgICAgICAgdGhyb3cgXCJ0aGUgcGFydHMgYW5kIGJpZ2h0cyBib3RoIG11c3QgYmUgZ3JlYXRlciB0aGFuIDBcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2NkKHRoaXMucGFydHMsIHRoaXMuYmlnaHRzKSAhPSAxKSB7XG4gICAgICAgICAgICB0aHJvdyBcInRoZSBwYXJ0cyBhbmQgYmlnaHRzIG11c3QgaGF2ZSBhIGdyZWF0ZXN0IGNvbW1vbiBkaXZpc29yIG9mIDFcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmaWxsQ29kaW5nKCkge1xuICAgICAgICB0aGlzLmNvZGluZyA9ICcnO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGFydHMgLSAxOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuY29kaW5nICs9IHRoaXMucGF0dGVybltpICUgdGhpcy5wYXR0ZXJuLmxlbmd0aF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5pdFZhcnMoKSB7XG4gICAgICAgIHRoaXMud2hvbGVOdW1iZXIgPSBNYXRoLmZsb29yKHRoaXMucGFydHMgLyB0aGlzLmJpZ2h0cyk7XG4gICAgICAgIHRoaXMucmVtYWluZGVyID0gdGhpcy5wYXJ0cyAlIHRoaXMuYmlnaHRzO1xuICAgICAgICB0aGlzLmNvdW50VmFsdWUgPSB0aGlzLmJpZ2h0cyAtIHRoaXMucmVtYWluZGVyO1xuICAgICAgICB0aGlzLmN5Y2xpY0JpZ2h0TnVtYmVyID0gW107XG4gICAgICAgIHRoaXMudG9wQ3ljbGljQmlnaHROdW1iZXIgPSBbXTtcbiAgICAgICAgdGhpcy5ib3RDeWNsaWNCaWdodE51bWJlciA9IFtdO1xuICAgICAgICB0aGlzLnRvcENvZGluZ1BhdHRlcm4gPSBbXTtcbiAgICAgICAgdGhpcy5ib3RDb2RpbmdQYXR0ZXJuID0gW107XG4gICAgICAgIHRoaXMuaGFsZkN5Y2xlcyA9IFtdO1xuICAgICAgICB0aGlzLnBpbnMgPSBbXTtcbiAgICB9XG4gICAgZmlsbENibigpIHtcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLmJpZ2h0czsgYysrKSB7XG4gICAgICAgICAgICB0aGlzLmN5Y2xpY0JpZ2h0TnVtYmVyWyhjICogdGhpcy5jb3VudFZhbHVlKSAlIHRoaXMuYmlnaHRzXSA9IGM7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLnBhcnRzIC0gMTsgYysrKSB7XG4gICAgICAgICAgICB0aGlzLnRvcEN5Y2xpY0JpZ2h0TnVtYmVyW2NdID0gdGhpcy5jeWNsaWNCaWdodE51bWJlclsoYyArIDEpICUgdGhpcy5iaWdodHNdO1xuICAgICAgICAgICAgdGhpcy5ib3RDeWNsaWNCaWdodE51bWJlclt0aGlzLnBhcnRzIC0gMSAtIGMgLSAxXSA9IHRoaXMuY3ljbGljQmlnaHROdW1iZXJbKGMgKyAxKSAlIHRoaXMuYmlnaHRzXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRQYXJ0RnJvbVR5cGUoaXNPdmVyKSB7XG4gICAgICAgIHJldHVybiBpc092ZXJcbiAgICAgICAgICAgID8gdGhpcy5zb2JyZSA/ICdVJyA6ICdPJ1xuICAgICAgICAgICAgOiB0aGlzLnNvYnJlID8gJ08nIDogJ1UnO1xuICAgIH1cbiAgICBmaWxsVW8oKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wYXJ0cyAtIDE7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgaXNPdmVyID0gKHRoaXMuY29kaW5nW2ldID09PSAnXFxcXCcpO1xuICAgICAgICAgICAgdGhpcy50b3BDb2RpbmdQYXR0ZXJuLnB1c2godGhpcy5nZXRQYXJ0RnJvbVR5cGUoIWlzT3ZlcikpO1xuICAgICAgICAgICAgdGhpcy5ib3RDb2RpbmdQYXR0ZXJuLnB1c2godGhpcy5nZXRQYXJ0RnJvbVR5cGUoaXNPdmVyKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmlsbFBpbnMoKSB7XG4gICAgICAgIHRoaXMucGlucy5wdXNoKDEpO1xuICAgICAgICBsZXQgbSA9IDIgKiB0aGlzLmJpZ2h0cztcbiAgICAgICAgaWYgKHRoaXMucGFydHMgJSAyKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IG07IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSAoaSAqIHRoaXMucGFydHMpICUgbTtcbiAgICAgICAgICAgICAgICB0aGlzLnBpbnMucHVzaChNYXRoLmZsb29yKHIgLyAyKSArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBtOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gKGkgKiB0aGlzLnBhcnRzKSAlIG07XG4gICAgICAgICAgICAgICAgdGhpcy5waW5zLnB1c2goTWF0aC5mbG9vcihyID09PSAwXG4gICAgICAgICAgICAgICAgICAgID8gKChpICogdGhpcy5wYXJ0cyArIDEpICUgbSkgLyAyXG4gICAgICAgICAgICAgICAgICAgIDogaSAlIDJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gciAvIDJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogKHIgKyAxKSAvIDIpICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5waW5zLnB1c2goMSk7XG4gICAgfVxuICAgIDtcbiAgICBmaWxsSGFsZkN5Y2xlcygpIHtcbiAgICAgICAgbGV0IGhjID0gbmV3IEhhbGZDeWNsZSh0aGlzLnBpbnNbMF0sIHRoaXMucGluc1sxXSk7XG4gICAgICAgIHRoaXMuaGFsZkN5Y2xlcy5wdXNoKGhjKTtcbiAgICAgICAgZm9yIChsZXQgbnVtID0gMjsgbnVtIDw9IDIgKiB0aGlzLmJpZ2h0czsgbnVtKyspIHtcbiAgICAgICAgICAgIGhjID0gbmV3IEhhbGZDeWNsZSh0aGlzLnBpbnNbbnVtIC0gMV0sIHRoaXMucGluc1tudW1dKTtcbiAgICAgICAgICAgIGNvbnN0IGN5Y2xpY0JpZ2h0TnVtYmVyID0gKG51bSAtIDIgLSAobnVtICUgMikpIC8gMjtcbiAgICAgICAgICAgIGNvbnN0IFtjb2RpbmdQYXR0ZXJuLCBzaWRlXSA9IG51bSAlIDJcbiAgICAgICAgICAgICAgICA/IFt0aGlzLnRvcENvZGluZ1BhdHRlcm4sIHRoaXMudG9wQ3ljbGljQmlnaHROdW1iZXJdXG4gICAgICAgICAgICAgICAgOiBbdGhpcy5ib3RDb2RpbmdQYXR0ZXJuLCB0aGlzLmJvdEN5Y2xpY0JpZ2h0TnVtYmVyXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29kaW5nUGF0dGVybi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChzaWRlW2ldIDw9IGN5Y2xpY0JpZ2h0TnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGhjLmFwcGVuZChjb2RpbmdQYXR0ZXJuW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmhhbGZDeWNsZXMucHVzaChoYyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc29sdmUoKSB7XG4gICAgICAgIHRoaXMuY2hlY2tDb25kaXRpb25zKCk7XG4gICAgICAgIHRoaXMuZmlsbENvZGluZygpO1xuICAgICAgICB0aGlzLmluaXRWYXJzKCk7XG4gICAgICAgIHRoaXMuZmlsbENibigpO1xuICAgICAgICB0aGlzLmZpbGxVbygpO1xuICAgICAgICB0aGlzLmZpbGxQaW5zKCk7XG4gICAgICAgIHRoaXMuZmlsbEhhbGZDeWNsZXMoKTtcbiAgICB9XG4gICAgc3RlcHMoKSB7XG4gICAgICAgIGxldCBsaXN0ID0gW107XG4gICAgICAgIGxldCBhdFRvcCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGNvbnN0IGhhbGZDeWNsZSBvZiB0aGlzLmhhbGZDeWNsZXMpIHtcbiAgICAgICAgICAgIGxpc3QucHVzaChgJHthdFRvcCA/ICd0b3AnIDogJ2JvdCd9IHBpbiAke2hhbGZDeWNsZS5mcm9tUGlufSB0byAke2F0VG9wID8gJ2JvdCcgOiAndG9wJ30gcGluICR7aGFsZkN5Y2xlLnRvUGlufTogJHtoYWxmQ3ljbGUuc3RlcHMoKSA/PyAnZnJlZSBydW4nfWApO1xuICAgICAgICAgICAgYXRUb3AgPSAhYXRUb3A7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgc2lnbmFsIH0gZnJvbSAnQHByZWFjdC9zaWduYWxzLXJlYWN0JztcbmltcG9ydCB7IEtub3QgfSBmcm9tICcuLi9saWInO1xuZXhwb3J0IGNvbnN0IEN1cnJlbnRLbm90ID0gKHdpbmRvd1sna25vdCddID0gc2lnbmFsKG5ldyBLbm90KHtcbiAgICBiaWdodHM6IDYsIHBhcnRzOiA1XG59KSkpO1xuZXhwb3J0IGNvbnN0IEtub3RFcnJvciA9IHNpZ25hbCgnJyk7XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBLbm90IH0gZnJvbSAnLi4vbGliJztcbmltcG9ydCB7IEN1cnJlbnRLbm90LCBLbm90RXJyb3IgfSBmcm9tICcuLi9kYXRhL0N1cnJlbnRLbm90JztcbmxldCBkZWZhdWx0S25vdCA9IHtcbiAgICBiaWdodHM6IDYsXG4gICAgcGFydHM6IDUsXG4gICAgc29icmU6IGZhbHNlLFxuICAgIHBhdHRlcm46ICdcXFxcLycsXG59O1xuKCgpID0+IHtcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5oYXNoLnNsaWNlKDEpKTtcbiAgICBjb25zdCBjYW5kaWRhdGVzID0gT2JqZWN0LmZyb21FbnRyaWVzKHBhcmFtcy5lbnRyaWVzKCkpO1xuICAgIGZvciAoY29uc3Qga2V5IGluIGRlZmF1bHRLbm90KSB7XG4gICAgICAgIGlmIChjYW5kaWRhdGVzW2tleV0pIHtcbiAgICAgICAgICAgIGRlZmF1bHRLbm90W2tleV0gPSAvKGJpZ2h0c3xwYXJ0cykvLnRlc3Qoa2V5KVxuICAgICAgICAgICAgICAgID8gTnVtYmVyKGNhbmRpZGF0ZXNba2V5XSlcbiAgICAgICAgICAgICAgICA6IC9zb2JyZS8udGVzdChrZXkpXG4gICAgICAgICAgICAgICAgICAgID8gY2FuZGlkYXRlc1trZXldID09PSAndHJ1ZSdcbiAgICAgICAgICAgICAgICAgICAgOiBjYW5kaWRhdGVzW2tleV07XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuZXhwb3J0IGNvbnN0IEtub3RDb250cm9scyA9ICgpID0+IHtcbiAgICBjb25zdCBbeyBiaWdodHMsIHBhcnRzLCBzb2JyZSwgcGF0dGVybiwgfSwgc2V0UHJvcHNdID0gUmVhY3QudXNlU3RhdGUoZGVmYXVsdEtub3QpO1xuICAgIGNvbnN0IGNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChrZXksIGUpID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSAvcGF0dGVybi8udGVzdChrZXkpXG4gICAgICAgICAgICA/IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICA6IC9zb2JyZS8udGVzdChrZXkpXG4gICAgICAgICAgICAgICAgPyBlLnRhcmdldC5jaGVja2VkXG4gICAgICAgICAgICAgICAgOiBlLnRhcmdldC52YWx1ZUFzTnVtYmVyO1xuICAgICAgICBzZXRQcm9wcygocHJldikgPT4gKHsgLi4ucHJldiwgW2tleV06IHZhbHVlIH0pKTtcbiAgICB9LCBbc2V0UHJvcHNdKTtcbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgS25vdEVycm9yLnZhbHVlID0gJyc7XG4gICAgICAgICAgICBDdXJyZW50S25vdC52YWx1ZSA9IG5ldyBLbm90KHsgYmlnaHRzLCBwYXJ0cywgc29icmUsIHBhdHRlcm4gfSk7XG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgICAgICAgICBwYXJhbXMuc2V0KCdiaWdodHMnLCBTdHJpbmcoYmlnaHRzKSk7XG4gICAgICAgICAgICBwYXJhbXMuc2V0KCdwYXJ0cycsIFN0cmluZyhwYXJ0cykpO1xuICAgICAgICAgICAgcGFyYW1zLnNldCgnc29icmUnLCBTdHJpbmcoc29icmUpKTtcbiAgICAgICAgICAgIHBhcmFtcy5zZXQoJ3BhdHRlcm4nLCBwYXR0ZXJuKTtcbiAgICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSBwYXJhbXMudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBLbm90RXJyb3IudmFsdWUgPSBlcnIudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgIH0sIFtiaWdodHMsIHBhcnRzLCBzb2JyZSwgcGF0dGVybl0pO1xuICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIiwgbnVsbCxcbiAgICAgICAgICAgIFwiQmlnaHRzXCIsXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgeyB0eXBlOiAnbnVtYmVyJywgdmFsdWU6IGJpZ2h0cywgbWluOiAyLCBvbkNoYW5nZTogKGUpID0+IGNoYW5nZSgnYmlnaHRzJywgZSkgfSkpLFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIiwgbnVsbCxcbiAgICAgICAgICAgIFwiUGFydHNcIixcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7IHR5cGU6ICdudW1iZXInLCB2YWx1ZTogcGFydHMsIG1pbjogMiwgb25DaGFuZ2U6IChlKSA9PiBjaGFuZ2UoJ3BhcnRzJywgZSkgfSkpLFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIiwgbnVsbCxcbiAgICAgICAgICAgIFwiU29icmVcIixcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7IHR5cGU6ICdjaGVja2JveCcsIGNoZWNrZWQ6IHNvYnJlLCBvbkNoYW5nZTogKGUpID0+IGNoYW5nZSgnc29icmUnLCBlKSB9KSksXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCBudWxsLFxuICAgICAgICAgICAgXCJQYXR0ZXJuXCIsXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiBwYXR0ZXJuLCBvbkNoYW5nZTogKGUpID0+IGNoYW5nZSgncGF0dGVybicsIGUpIH0pKSkpO1xufTtcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xuZXhwb3J0IGNvbnN0IEFsZ29yaXRobURpYWdyYW0gPSAoeyBrbm90OiB7IHRvcEN5Y2xpY0JpZ2h0TnVtYmVyLCBib3RDeWNsaWNCaWdodE51bWJlciwgdG9wQ29kaW5nUGF0dGVybiwgYm90Q29kaW5nUGF0dGVybiwgY29kaW5nIH0gfSkgPT4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCxcbiAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiaDNcIiwgbnVsbCwgXCJBbGdvcml0aG0gRGlhZ3JhbVwiKSxcbiAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwidGFibGVcIiwgbnVsbCxcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcInRib2R5XCIsIG51bGwsXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFJvdywgeyBpdGVtczogdG9wQ29kaW5nUGF0dGVybiB9KSxcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm93LCB7IGl0ZW1zOiB0b3BDeWNsaWNCaWdodE51bWJlciB9KSxcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm93LCB7IGl0ZW1zOiBjb2Rpbmcuc3BsaXQoXCJcIikgfSksXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFJvdywgeyBpdGVtczogYm90Q3ljbGljQmlnaHROdW1iZXIgfSksXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFJvdywgeyBpdGVtczogYm90Q29kaW5nUGF0dGVybiB9KSkpKSk7XG5jb25zdCBDZWxsID0gc3R5bGVkLnRkLndpdGhDb25maWcoeyBkaXNwbGF5TmFtZTogXCJDZWxsXCIsIGNvbXBvbmVudElkOiBcInNjLTFibWJmOGhcIiB9KSBgXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbmA7XG5jb25zdCBSb3cgPSAoeyBpdGVtcyB9KSA9PiAoUmVhY3QuY3JlYXRlRWxlbWVudChcInRyXCIsIG51bGwsIGl0ZW1zLm1hcCgoaXRlbSwgY29sKSA9PiAoUmVhY3QuY3JlYXRlRWxlbWVudChDZWxsLCB7IGtleTogYCR7Y29sfS0ke2l0ZW19YCB9LCBpdGVtKSkpKSk7XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcbmV4cG9ydCBjb25zdCBSdW5MaXN0ID0gKHsga25vdCB9KSA9PiAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLFxuICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJoM1wiLCBudWxsLCBcIkhhbGYgQ3ljbGVzXCIpLFxuICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSGFsZkN5Y2xlTGlzdCwgbnVsbCwga25vdC5zdGVwcygpLm1hcCgocm93KSA9PiAoUmVhY3QuY3JlYXRlRWxlbWVudChIYWxmQ3ljbGVSb3csIHsga2V5OiByb3cgfSwgcm93KSkpKSkpO1xuY29uc3QgSGFsZkN5Y2xlTGlzdCA9IHN0eWxlZC5vbC53aXRoQ29uZmlnKHsgZGlzcGxheU5hbWU6IFwiSGFsZkN5Y2xlTGlzdFwiLCBjb21wb25lbnRJZDogXCJzYy0xY2ZuaGZlXCIgfSkgYGA7XG5jb25zdCBIYWxmQ3ljbGVSb3cgPSBzdHlsZWQubGkud2l0aENvbmZpZyh7IGRpc3BsYXlOYW1lOiBcIkhhbGZDeWNsZVJvd1wiLCBjb21wb25lbnRJZDogXCJzYy0xYXdiOWNvXCIgfSkgYGA7XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcbmltcG9ydCB7IEN1cnJlbnRLbm90IH0gZnJvbSAnLi4vZGF0YS9DdXJyZW50S25vdCc7XG5jb25zdCB0aGV0YSA9IE1hdGguUEkgLyA2O1xuY29uc3QgdGFuVGhldGEgPSBNYXRoLnRhbih0aGV0YSk7XG5leHBvcnQgY29uc3QgS25vdEdyaWQgPSAoKSA9PiB7XG4gICAgY29uc3QgY2FudmFzID0gUmVhY3QudXNlUmVmKG51bGwpO1xuICAgIGNvbnN0IGtub3QgPSBDdXJyZW50S25vdC52YWx1ZTtcbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWNhbnZhcy5jdXJyZW50IHx8ICFrbm90KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjbGVhckRyYXdpbmcoY2FudmFzLmN1cnJlbnQsIGtub3QpO1xuICAgICAgICBkcmF3UGluc0FuZEdyaWQoY2FudmFzLmN1cnJlbnQsIGtub3QpO1xuICAgICAgICBkcmF3T3ZlclVuZGVycyhjYW52YXMuY3VycmVudCwga25vdCk7XG4gICAgfSwgW2tub3RdKTtcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCxcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImgzXCIsIG51bGwsIFwiS25vdCBEaWFncmFtXCIpLFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFJlc2l6ZUNvbnRhaW5lciwgbnVsbCxcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2FudmFzLCB7IHJlZjogY2FudmFzIH0pKSkpO1xufTtcbmNvbnN0IFJlc2l6ZUNvbnRhaW5lciA9IHN0eWxlZC5kaXYud2l0aENvbmZpZyh7IGRpc3BsYXlOYW1lOiBcIlJlc2l6ZUNvbnRhaW5lclwiLCBjb21wb25lbnRJZDogXCJzYy1qZWF3Z1wiIH0pIGBcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgcmVzaXplOiBhdXRvO1xuYDtcbmNvbnN0IENhbnZhcyA9IHN0eWxlZC5jYW52YXMud2l0aENvbmZpZyh7IGRpc3BsYXlOYW1lOiBcIkNhbnZhc1wiLCBjb21wb25lbnRJZDogXCJzYy0xeWIxb2doXCIgfSkgYFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGhlaWdodDogMTAwJTtcbiAgd2lkdGg6IDEwMCU7XG5gO1xuY29uc3QgY2xlYXJEcmF3aW5nID0gKGNhbnZhcywga25vdCkgPT4ge1xuICAgIGNhbnZhcy5oZWlnaHQgPSAoa25vdC5iaWdodHMgLSAwLjUpICogMzI7XG4gICAgY2FudmFzLnBhcmVudEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7Y2FudmFzLmhlaWdodH1weGA7XG4gICAgY2FudmFzLndpZHRoID0gKDIgKiAoMTYgLyB0YW5UaGV0YSkpICogKGtub3QucGFydHMgLyAyKTtcbiAgICBjYW52YXMucGFyZW50RWxlbWVudC5zdHlsZS53aWR0aCA9IGAke2NhbnZhcy53aWR0aH1weGA7XG4gICAgY29uc3Qgd2lkdGggPSBjYW52YXMud2lkdGg7XG4gICAgY29uc3QgaGVpZ2h0ID0gY2FudmFzLmhlaWdodDtcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xufTtcbmNvbnN0IGRyYXdQaW5zQW5kR3JpZCA9IChjYW52YXMsIGtub3QpID0+IHtcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjb25zdCB3aWR0aCA9IGNhbnZhcy53aWR0aDtcbiAgICBjb25zdCBoZWlnaHQgPSBjYW52YXMuaGVpZ2h0O1xuICAgIGNvbnN0IGRlbHRhWSA9IGhlaWdodCAvIChrbm90LmJpZ2h0cyAtIDAuNSk7XG4gICAgY29uc3QgZGVsdGFYID0gKDIgKiAoKGRlbHRhWSAvIDIpIC8gdGFuVGhldGEpKTtcbiAgICBjdHguZmlsbFN0eWxlID0gJyM1NzNjNjYnO1xuICAgIGN0eC5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgIGN0eC5mb250ID0gJzEwcHggc2Fucy1zZXJpZic7XG4gICAgY29uc3QgYWNyb3NzID0ga25vdC5wYXJ0cyAvIDI7XG4gICAgY29uc3QgaXNPZGRQYXJ0cyA9IGtub3QucGFydHMgJSAyO1xuICAgIGZvciAobGV0IHBpbiA9IDA7IHBpbiA8PSBrbm90LmJpZ2h0czsgcGluKyspIHtcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7XG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgTWF0aC5jZWlsKGFjcm9zcyk7IHgrKykge1xuICAgICAgICAgICAgaWYgKHggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoYCR7cGluICsgMX1gLCB4ICsgMTUsIGhlaWdodCAtICgocGluICogZGVsdGFZKSAtIDMpKTtcbiAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoYCR7cGluICsgMX1gLCAoYWNyb3NzICogZGVsdGFYKSAtIDE1LCBoZWlnaHQgLSAoKChwaW4gKyAoaXNPZGRQYXJ0cyAqIDAuNSkpICogZGVsdGFZKSAtIDMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oKHggKiBkZWx0YVgpICsgKChrbm90LnBhcnRzIC8gMikgKiBkZWx0YVgpLCBoZWlnaHQgLSAoKHBpbiAtIGFjcm9zcykgKiBkZWx0YVkpKTtcbiAgICAgICAgICAgIGN0eC5saW5lVG8oKHggKiBkZWx0YVgpLCBoZWlnaHQgLSAocGluICogZGVsdGFZKSk7XG4gICAgICAgICAgICBjdHgubGluZVRvKCh4ICogZGVsdGFYKSArICgoa25vdC5wYXJ0cyAvIDIpICogZGVsdGFYKSwgaGVpZ2h0IC0gKChwaW4gKyBhY3Jvc3MpICogZGVsdGFZKSk7XG4gICAgICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBjdHgubW92ZVRvKCh4ICogZGVsdGFYKSAtICgoa25vdC5wYXJ0cyAvIDIpICogZGVsdGFYKSwgaGVpZ2h0IC0gKChwaW4gLSBhY3Jvc3MpICogZGVsdGFZKSk7XG4gICAgICAgICAgICBjdHgubGluZVRvKCh4ICogZGVsdGFYKSwgaGVpZ2h0IC0gKHBpbiAqIGRlbHRhWSkpO1xuICAgICAgICAgICAgY3R4LmxpbmVUbygoeCAqIGRlbHRhWCkgLSAoKGtub3QucGFydHMgLyAyKSAqIGRlbHRhWCksIGhlaWdodCAtICgocGluICsgYWNyb3NzKSAqIGRlbHRhWSkpO1xuICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGN0eC5jbGVhclJlY3QoKChhY3Jvc3MpICogZGVsdGFYKSwgMCwgd2lkdGggLSAoKGFjcm9zcykgKiBkZWx0YVgpLCBoZWlnaHQpO1xufTtcbmNvbnN0IGRyYXdPdmVyVW5kZXJzID0gKGNhbnZhcywga25vdCkgPT4ge1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGNvbnN0IGhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XG4gICAgY29uc3QgZGVsdGFZID0gaGVpZ2h0IC8gKGtub3QuYmlnaHRzIC0gMC41KTtcbiAgICBjb25zdCBkZWx0YVggPSAoMiAqICgoZGVsdGFZIC8gMikgLyB0YW5UaGV0YSkpO1xuICAgIGN0eC5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgY29uc3QgYWNyb3NzID0ga25vdC5wYXJ0cyAvIDI7XG4gICAgY29uc3QgaXNPZGRQYXJ0cyA9IGtub3QucGFydHMgJSAyO1xuICAgIGNvbnN0IHcgPSAoMC4yICogZGVsdGFYKTtcbiAgICBjb25zdCBoID0gKDAuMiAqIGRlbHRhWSk7XG4gICAgY29uc3QgbGVmdENvb3JkcyA9ICh4LCBwaW4pID0+IChbXG4gICAgICAgICgoeCArIDAuNDApICogZGVsdGFYKSwgaGVpZ2h0IC0gKChwaW4gKyAwLjYpICogZGVsdGFZKVxuICAgIF0pO1xuICAgIGNvbnN0IHJpZ2h0Q29vcmRzID0gKHgsIHBpbikgPT4gKFtcbiAgICAgICAgKCh4ICsgMC45MCkgKiBkZWx0YVgpLCBoZWlnaHQgLSAocGluICogZGVsdGFZKSAtIDNcbiAgICBdKTtcbiAgICBjb25zdCBPdmVyID0gKFt4LCB5XSkgPT4ge1xuICAgICAgICBjdHguY2xlYXJSZWN0KHgsIHksIHcsIGgpO1xuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5tb3ZlVG8oeCwgeSk7XG4gICAgICAgIGN0eC5saW5lVG8oeCArIHcsIHkgKyBoKTtcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgfTtcbiAgICBjb25zdCBVbmRlciA9IChbeCwgeV0pID0+IHtcbiAgICAgICAgY3R4LmNsZWFyUmVjdCh4LCB5LCB3LCBoKTtcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBjdHgubW92ZVRvKHggKyB3LCB5KTtcbiAgICAgICAgY3R4LmxpbmVUbyh4LCB5ICsgaCk7XG4gICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgIH07XG4gICAgZm9yIChsZXQgcGluID0gMDsgcGluIDwga25vdC5iaWdodHM7IHBpbisrKSB7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSA1O1xuICAgICAgICBjb25zdCBjb2RpbmcgPSBrbm90LmNvZGluZy5zcGxpdCgnJyk7XG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgTWF0aC5mbG9vcihhY3Jvc3MpOyB4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGxlZnQgPSBjb2Rpbmcuc2hpZnQoKTtcbiAgICAgICAgICAgIChsZWZ0ID09PSAnXFxcXCcgPyBPdmVyIDogVW5kZXIpKGxlZnRDb29yZHMoeCwgcGluKSk7XG4gICAgICAgICAgICBpZiAoaXNPZGRQYXJ0cyB8fFxuICAgICAgICAgICAgICAgICh4ICsgMSA8IGFjcm9zcykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByaWdodCA9IGNvZGluZy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIChyaWdodCA9PT0gJ1xcXFwnID8gT3ZlciA6IFVuZGVyKShyaWdodENvb3Jkcyh4LCBwaW4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBDdXJyZW50S25vdCwgS25vdEVycm9yIH0gZnJvbSAnLi4vZGF0YS9DdXJyZW50S25vdCc7XG5pbXBvcnQgeyBBbGdvcml0aG1EaWFncmFtIH0gZnJvbSAnLi9BbGdvcml0aG1EaWFncmFtJztcbmltcG9ydCB7IFJ1bkxpc3QgfSBmcm9tICcuL1J1bkxpc3QnO1xuaW1wb3J0IHsgS25vdEdyaWQgfSBmcm9tICcuL0tub3RHcmlkJztcbmV4cG9ydCBjb25zdCBLbm90RGlzcGxheSA9ICgpID0+IHtcbiAgICBjb25zdCBrbm90ID0gQ3VycmVudEtub3QudmFsdWU7XG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLFxuICAgICAgICBLbm90RXJyb3IudmFsdWUgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChcImg0XCIsIG51bGwsIEtub3RFcnJvci52YWx1ZSksXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJoMlwiLCBudWxsLFxuICAgICAgICAgICAga25vdC5iaWdodHMsXG4gICAgICAgICAgICBcIkIgeCBcIixcbiAgICAgICAgICAgIGtub3QucGFydHMsXG4gICAgICAgICAgICBcIlAgXCIsXG4gICAgICAgICAgICBrbm90LnNvYnJlID8gJ3NvYnJlJyA6ICdjYXNhJyxcbiAgICAgICAgICAgIFwiIGtub3RcIiksXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQWxnb3JpdGhtRGlhZ3JhbSwgeyBrbm90OiBrbm90IH0pLFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEtub3RHcmlkLCBudWxsKSxcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChSdW5MaXN0LCB7IGtub3Q6IGtub3QgfSkpKTtcbn07XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBjcmVhdGVSb290IH0gZnJvbSAncmVhY3QtZG9tL2NsaWVudCc7XG5pbXBvcnQgeyBBcHAgfSBmcm9tICcuL0FwcCc7XG5jb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWN0aW9uJyk7XG5jb25zdCByb290ID0gY3JlYXRlUm9vdChjb250YWluZXIpO1xuY29uc3QgZWxlbWVudCA9IChSZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LlN0cmljdE1vZGUsIG51bGwsXG4gICAgUmVhY3QuY3JlYXRlRWxlbWVudChBcHAsIG51bGwpKSk7XG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG5yb290LnJlbmRlcihlbGVtZW50KTtcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEtub3RDb250cm9scyB9IGZyb20gJy4vY29tcG9uZW50cy9Lbm90Q29udHJvbHMnO1xuaW1wb3J0IHsgS25vdERpc3BsYXkgfSBmcm9tICcuL2NvbXBvbmVudHMvS25vdERpc3BsYXknO1xuZXhwb3J0IGNvbnN0IEFwcCA9ICgpID0+IChSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsXG4gICAgUmVhY3QuY3JlYXRlRWxlbWVudChLbm90Q29udHJvbHMsIG51bGwpLFxuICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJoclwiLCBudWxsKSxcbiAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEtub3REaXNwbGF5LCBudWxsKSkpO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0NDgzOiAwXG59O1xuXG4vLyBubyBjaHVuayBvbiBkZW1hbmQgbG9hZGluZ1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8uaiA9IChjaHVua0lkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwKTtcblxuLy8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG52YXIgd2VicGFja0pzb25wQ2FsbGJhY2sgPSAocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24sIGRhdGEpID0+IHtcblx0dmFyIFtjaHVua0lkcywgbW9yZU1vZHVsZXMsIHJ1bnRpbWVdID0gZGF0YTtcblx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG5cdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuXHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwO1xuXHRpZihjaHVua0lkcy5zb21lKChpZCkgPT4gKGluc3RhbGxlZENodW5rc1tpZF0gIT09IDApKSkge1xuXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYocnVudGltZSkgdmFyIHJlc3VsdCA9IHJ1bnRpbWUoX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdH1cblx0aWYocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24pIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xuXHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuXHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSgpO1xuXHRcdH1cblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHR9XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk8ocmVzdWx0KTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtrbm90c1wiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtrbm90c1wiXSB8fCBbXTtcbmNodW5rTG9hZGluZ0dsb2JhbC5mb3JFYWNoKHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgMCkpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIGNodW5rTG9hZGluZ0dsb2JhbC5wdXNoLmJpbmQoY2h1bmtMb2FkaW5nR2xvYmFsKSk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5uYyA9IHVuZGVmaW5lZDsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbMjE2XSwgKCkgPT4gKF9fd2VicGFja19yZXF1aXJlX18oNzk3KSkpXG5fX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKF9fd2VicGFja19leHBvcnRzX18pO1xuIl0sIm5hbWVzIjpbImRlZmVycmVkIiwiSGFsZkN5Y2xlIiwiY29uc3RydWN0b3IiLCJmcm9tUGluIiwidG9QaW4iLCJ0aGlzIiwicnVucyIsImFwcGVuZCIsInN0ZXAiLCJwdXNoIiwic3RlcHMiLCJsaXN0IiwiaSIsImxlbmd0aCIsImNvZGluZ1BhdHRlcm4iLCJjb3VudCIsInN0cnMiLCJqb2luIiwidW5kZWZpbmVkIiwiZ2NkIiwieCIsInkiLCJLbm90IiwicGFydHMiLCJiaWdodHMiLCJzb2JyZSIsInBhdHRlcm4iLCJzb2x2ZSIsImNoZWNrQ29uZGl0aW9ucyIsImZpbGxDb2RpbmciLCJjb2RpbmciLCJpbml0VmFycyIsIndob2xlTnVtYmVyIiwiTWF0aCIsImZsb29yIiwicmVtYWluZGVyIiwiY291bnRWYWx1ZSIsImN5Y2xpY0JpZ2h0TnVtYmVyIiwidG9wQ3ljbGljQmlnaHROdW1iZXIiLCJib3RDeWNsaWNCaWdodE51bWJlciIsInRvcENvZGluZ1BhdHRlcm4iLCJib3RDb2RpbmdQYXR0ZXJuIiwiaGFsZkN5Y2xlcyIsInBpbnMiLCJmaWxsQ2JuIiwiYyIsImdldFBhcnRGcm9tVHlwZSIsImlzT3ZlciIsImZpbGxVbyIsImZpbGxQaW5zIiwibSIsInIiLCJmaWxsSGFsZkN5Y2xlcyIsImhjIiwibnVtIiwic2lkZSIsImF0VG9wIiwiaGFsZkN5Y2xlIiwiQ3VycmVudEtub3QiLCJ3aW5kb3ciLCJLbm90RXJyb3IiLCJkZWZhdWx0S25vdCIsInBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsImxvY2F0aW9uIiwiaGFzaCIsInNsaWNlIiwiY2FuZGlkYXRlcyIsIk9iamVjdCIsImZyb21FbnRyaWVzIiwiZW50cmllcyIsImtleSIsInRlc3QiLCJOdW1iZXIiLCJLbm90Q29udHJvbHMiLCJzZXRQcm9wcyIsImNoYW5nZSIsImUiLCJ2YWx1ZSIsInRhcmdldCIsImNoZWNrZWQiLCJ2YWx1ZUFzTnVtYmVyIiwicHJldiIsInNldCIsIlN0cmluZyIsInRvU3RyaW5nIiwiZXJyIiwidHlwZSIsIm1pbiIsIm9uQ2hhbmdlIiwiQWxnb3JpdGhtRGlhZ3JhbSIsImtub3QiLCJSb3ciLCJpdGVtcyIsInNwbGl0IiwiQ2VsbCIsInRkIiwid2l0aENvbmZpZyIsImRpc3BsYXlOYW1lIiwiY29tcG9uZW50SWQiLCJtYXAiLCJpdGVtIiwiY29sIiwiUnVuTGlzdCIsIkhhbGZDeWNsZUxpc3QiLCJyb3ciLCJIYWxmQ3ljbGVSb3ciLCJvbCIsImxpIiwidGhldGEiLCJQSSIsInRhblRoZXRhIiwidGFuIiwiS25vdEdyaWQiLCJjYW52YXMiLCJjdXJyZW50IiwiY2xlYXJEcmF3aW5nIiwiZHJhd1BpbnNBbmRHcmlkIiwiZHJhd092ZXJVbmRlcnMiLCJSZXNpemVDb250YWluZXIiLCJDYW52YXMiLCJyZWYiLCJkaXYiLCJoZWlnaHQiLCJwYXJlbnRFbGVtZW50Iiwic3R5bGUiLCJ3aWR0aCIsImdldENvbnRleHQiLCJjbGVhclJlY3QiLCJjdHgiLCJkZWx0YVkiLCJkZWx0YVgiLCJmaWxsU3R5bGUiLCJzdHJva2VTdHlsZSIsInRleHRBbGlnbiIsImZvbnQiLCJhY3Jvc3MiLCJpc09kZFBhcnRzIiwicGluIiwibGluZVdpZHRoIiwiY2VpbCIsImZpbGxUZXh0IiwiYmVnaW5QYXRoIiwibW92ZVRvIiwibGluZVRvIiwic3Ryb2tlIiwiY2xvc2VQYXRoIiwidyIsImgiLCJsZWZ0Q29vcmRzIiwicmlnaHRDb29yZHMiLCJPdmVyIiwiVW5kZXIiLCJzaGlmdCIsIktub3REaXNwbGF5IiwiY29udGFpbmVyIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwicm9vdCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInJlbmRlciIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiTyIsInJlc3VsdCIsImNodW5rSWRzIiwiZm4iLCJwcmlvcml0eSIsIm5vdEZ1bGZpbGxlZCIsIkluZmluaXR5IiwiZnVsZmlsbGVkIiwiaiIsImtleXMiLCJldmVyeSIsInNwbGljZSIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpbnN0YWxsZWRDaHVua3MiLCJjaHVua0lkIiwid2VicGFja0pzb25wQ2FsbGJhY2siLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsImRhdGEiLCJtb3JlTW9kdWxlcyIsInJ1bnRpbWUiLCJzb21lIiwiaWQiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJzZWxmIiwiZm9yRWFjaCIsImJpbmQiLCJuYyIsIl9fd2VicGFja19leHBvcnRzX18iXSwic291cmNlUm9vdCI6IiJ9