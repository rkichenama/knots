(()=>{"use strict";var t,e={920:(t,e,s)=>{var i=s(294),n=s(745);class r{constructor(t=1,e=1){this.runs=[],this.fromPin=0,this.toPin=0,this.runs=[],this.fromPin=t,this.toPin=e}append(t){this.runs.push(t)}steps(){let t=[];for(let e=0;e<this.runs.length;e++)0===t.length||t[t.length-1].codingPattern!=this.runs[e]?t.push({codingPattern:this.runs[e],count:1}):t[t.length-1].count++;let e=[];for(let s=0;s<t.length;s++)e.push(`${t[s].codingPattern}${t[s].count>1?t[s].count:""}`);return e.join(" ")}}function l(t,e){return 0===e?t:l(e,t%e)}class h{constructor({parts:t=5,bights:e=6,sobre:s=!1,pattern:i="\\/"}){this.parts=t,this.bights=e,this.pattern=i,this.sobre=!!s,this.solve()}checkConditions(){if(!this.parts||!this.bights)throw"the parts and bights both must be greater than 0";if(1!=l(this.parts,this.bights))throw"the parts and bights must have a greatest common divisor of 1"}fillCoding(){this.coding="";for(let t=0;t<this.parts-1;t++)this.coding+=this.pattern[t%this.pattern.length]}initVars(){this.remainder=this.parts%this.bights,this.countValue=this.bights-this.remainder,this.cyclicBightNumber=[],this.topCyclicBightNumber=[],this.botCyclicBightNumber=[],this.topCodingPattern=[],this.botCodingPattern=[],this.halfCycles=[],this.pins=[]}fillCbn(){for(let t=0;t<this.bights;t++)this.cyclicBightNumber[t*this.countValue%this.bights]=t;for(let t=0;t<this.parts-1;t++)this.topCyclicBightNumber[t]=this.cyclicBightNumber[(t+1)%this.bights],this.botCyclicBightNumber[this.parts-1-t-1]=this.cyclicBightNumber[(t+1)%this.bights]}getPartFromType(t){return t?this.sobre?"U":"O":this.sobre?"O":"U"}fillUo(){for(let t=0;t<this.parts-1;t++){const e="\\"===this.coding[t];this.topCodingPattern.push(this.getPartFromType(!e)),this.botCodingPattern.push(this.getPartFromType(e))}}fillPins(){this.pins.push(1);let t=2*this.bights;if(this.parts%2)for(let e=1;e<t;e++){const s=e*this.parts%t;this.pins.push(Math.floor(s/2)+1)}else for(let e=1;e<t;e++){const s=e*this.parts%t;this.pins.push(Math.floor(0===s?(e*this.parts+1)%t/2:e%2?s/2:(s+1)/2)+1)}this.pins.push(1)}fillHalfCycles(){let t=new r(this.pins[0],this.pins[1]);this.halfCycles.push(t);for(let e=2;e<=2*this.bights;e++){t=new r(this.pins[e-1],this.pins[e]);const s=(e-2-e%2)/2,[i,n]=e%2?[this.topCodingPattern,this.topCyclicBightNumber]:[this.botCodingPattern,this.botCyclicBightNumber];for(let e=0;e<i.length;e++)n[e]<=s&&t.append(i[e]);this.halfCycles.push(t)}}solve(){this.checkConditions(),this.fillCoding(),this.initVars(),this.fillCbn(),this.fillUo(),this.fillPins(),this.fillHalfCycles()}steps(){let t=[],e=!1;for(const s of this.halfCycles)t.push(`${e?"top":"bot"} pin ${s.fromPin} to ${e?"bot":"top"} pin ${s.toPin}: ${s.steps()??"free run"}`),e=!e;return t}}const a=(0,s(726).td)(new h({bights:6,parts:5})),o=()=>{const[{bights:t,parts:e,sobre:s,pattern:n},r]=i.useState({bights:6,parts:5,sobre:!1,pattern:"\\/"}),[l,o]=i.useState(""),c=i.useCallback(((t,e)=>{const s=/pattern/.test(t)?e.target.value:/sobre/.test(t)?e.target.checked:e.target.valueAsNumber;r((e=>({...e,[t]:s})))}),[r]);return i.useEffect((()=>{try{o(""),a.value=new h({bights:t,parts:e,sobre:s,pattern:n})}catch(t){o(t.toString())}}),[t,e,s,n]),i.createElement("div",null,i.createElement("label",null,"Bights",i.createElement("input",{type:"number",value:t,onChange:t=>c("bights",t)})),i.createElement("label",null,"Parts",i.createElement("input",{type:"number",value:e,onChange:t=>c("parts",t)})),i.createElement("label",null,"Sobre",i.createElement("input",{type:"checkbox",checked:s,onChange:t=>c("sobre",t)})),i.createElement("label",null,"Pattern",i.createElement("input",{type:"text",value:n,onChange:t=>c("pattern",t)})),l&&i.createElement("h4",null,l))};var c=s(394);const u=({knot:{topCyclicBightNumber:t,botCyclicBightNumber:e,topCodingPattern:s,botCodingPattern:n,coding:r}})=>i.createElement("div",null,i.createElement("h3",null,"Algorithm Diagram"),i.createElement("table",null,i.createElement("tbody",null,i.createElement(m,{items:s}),i.createElement(m,{items:t}),i.createElement(m,{items:r.split("")}),i.createElement(m,{items:e}),i.createElement(m,{items:n})))),p=c.ZP.td.withConfig({displayName:"Cell",componentId:"sc-1bmbf8h"})`
  text-align: center;
`,m=({items:t})=>i.createElement("tr",null,t.map(((t,e)=>i.createElement(p,{key:`${e}-${t}`},t)))),g=({knot:t})=>i.createElement("div",null,i.createElement("h3",null,"Half Cycles"),i.createElement(b,null,t.steps().map((t=>i.createElement(f,{key:t},t))))),b=c.ZP.ol.withConfig({displayName:"HalfCycleList",componentId:"sc-1cfnhfe"})``,f=c.ZP.li.withConfig({displayName:"HalfCycleRow",componentId:"sc-1awb9co"})``,d=()=>{const t=a.value;return t?i.createElement(i.Fragment,null,i.createElement(u,{knot:t}),i.createElement(g,{knot:t})):""},C=document.createElement("section"),y=(0,n.s)(C),E=i.createElement(i.StrictMode,null,i.createElement((()=>i.createElement("div",null,i.createElement(o,null),i.createElement("hr",null),i.createElement(d,null))),null));document.body.appendChild(C),y.render(E)}},s={};function i(t){var n=s[t];if(void 0!==n)return n.exports;var r=s[t]={exports:{}};return e[t](r,r.exports,i),r.exports}i.m=e,t=[],i.O=(e,s,n,r)=>{if(!s){var l=1/0;for(c=0;c<t.length;c++){for(var[s,n,r]=t[c],h=!0,a=0;a<s.length;a++)(!1&r||l>=r)&&Object.keys(i.O).every((t=>i.O[t](s[a])))?s.splice(a--,1):(h=!1,r<l&&(l=r));if(h){t.splice(c--,1);var o=n();void 0!==o&&(e=o)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[s,n,r]},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={483:0};i.O.j=e=>0===t[e];var e=(e,s)=>{var n,r,[l,h,a]=s,o=0;if(l.some((e=>0!==t[e]))){for(n in h)i.o(h,n)&&(i.m[n]=h[n]);if(a)var c=a(i)}for(e&&e(s);o<l.length;o++)r=l[o],i.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return i.O(c)},s=self.webpackChunkknots=self.webpackChunkknots||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})(),i.nc=void 0;var n=i.O(void 0,[216],(()=>i(920)));n=i.O(n)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUJDLElBQVlELEVBQWdCQyxJQUNyRUQsRUFBZ0JDLEdBQVMsS0FFMUJELEVBQWdCQyxHQUFXLEVBRTVCLE9BQU9wQyxFQUFvQk8sRUFBRUMsRUFBTyxFQUdqQ29DLEVBQXFCQyxLQUF3QixrQkFBSUEsS0FBd0IsbUJBQUssR0FDbEZELEVBQW1CRSxRQUFRVCxFQUFxQlUsS0FBSyxLQUFNLElBQzNESCxFQUFtQnpJLEtBQU9rSSxFQUFxQlUsS0FBSyxLQUFNSCxFQUFtQnpJLEtBQUs0SSxLQUFLSCxHLEtDaER2RjVDLEVBQW9CZ0QsUUFBSzdDLEVDR3pCLElBQUk4QyxFQUFzQmpELEVBQW9CTyxPQUFFSixFQUFXLENBQUMsTUFBTSxJQUFPSCxFQUFvQixPQUM3RmlELEVBQXNCakQsRUFBb0JPLEVBQUUwQyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9jaHVuayBsb2FkZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9oYWxmY3ljbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9nY2QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9rbm90LnRzIiwid2VicGFjazovLy8uL3NyYy9kYXRhL0N1cnJlbnRLbm90LnRzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0tub3RDb250cm9scy50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvQWxnb3JpdGhtRGlhZ3JhbS50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvUnVuTGlzdC50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvS25vdERpc3BsYXkudHN4Iiwid2VicGFjazovLy8uL3NyYy9pbmRleC50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcC50c3giLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL25vbmNlIiwid2VicGFjazovLy93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGRlZmVycmVkID0gW107XG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8gPSAocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSA9PiB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV0gPSBkZWZlcnJlZFtpXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoKGtleSkgPT4gKF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKSkpKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwiZXhwb3J0IGNsYXNzIEhhbGZDeWNsZSB7XG4gICAgY29uc3RydWN0b3IoZnJvbVBpbiA9IDEsIHRvUGluID0gMSkge1xuICAgICAgICB0aGlzLnJ1bnMgPSBbXTtcbiAgICAgICAgdGhpcy5mcm9tUGluID0gMDtcbiAgICAgICAgdGhpcy50b1BpbiA9IDA7XG4gICAgICAgIHRoaXMucnVucyA9IFtdO1xuICAgICAgICB0aGlzLmZyb21QaW4gPSBmcm9tUGluO1xuICAgICAgICB0aGlzLnRvUGluID0gdG9QaW47XG4gICAgfVxuICAgIGFwcGVuZChzdGVwKSB7IHRoaXMucnVucy5wdXNoKHN0ZXApOyB9XG4gICAgc3RlcHMoKSB7XG4gICAgICAgIGxldCBsaXN0ID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ydW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobGlzdC5sZW5ndGggPT09IDAgfHwgbGlzdFtsaXN0Lmxlbmd0aCAtIDFdLmNvZGluZ1BhdHRlcm4gIT0gdGhpcy5ydW5zW2ldKSB7XG4gICAgICAgICAgICAgICAgbGlzdC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgY29kaW5nUGF0dGVybjogdGhpcy5ydW5zW2ldLFxuICAgICAgICAgICAgICAgICAgICBjb3VudDogMSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxpc3RbbGlzdC5sZW5ndGggLSAxXS5jb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBzdHJzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc3Rycy5wdXNoKGAke2xpc3RbaV0uY29kaW5nUGF0dGVybn0ke2xpc3RbaV0uY291bnQgPiAxID8gbGlzdFtpXS5jb3VudCA6ICcnfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJzLmpvaW4oJyAnKTtcbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnY2QoeCwgeSkge1xuICAgIGlmICh5ID09PSAwKVxuICAgICAgICByZXR1cm4geDtcbiAgICByZXR1cm4gZ2NkKHksIHggJSB5KTtcbn1cbiIsImltcG9ydCB7IEhhbGZDeWNsZSB9IGZyb20gJy4vaGFsZmN5Y2xlJztcbmltcG9ydCBnY2QgZnJvbSAnLi9nY2QnO1xuZXhwb3J0IGNsYXNzIEtub3Qge1xuICAgIGNvbnN0cnVjdG9yKHsgcGFydHMgPSA1LCBiaWdodHMgPSA2LCBzb2JyZSA9IGZhbHNlLCBwYXR0ZXJuID0gJ1xcXFwvJyB9KSB7XG4gICAgICAgIHRoaXMucGFydHMgPSBwYXJ0cztcbiAgICAgICAgdGhpcy5iaWdodHMgPSBiaWdodHM7XG4gICAgICAgIHRoaXMucGF0dGVybiA9IHBhdHRlcm47XG4gICAgICAgIHRoaXMuc29icmUgPSAhIXNvYnJlO1xuICAgICAgICB0aGlzLnNvbHZlKCk7XG4gICAgfVxuICAgIGNoZWNrQ29uZGl0aW9ucygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhcnRzIHx8ICF0aGlzLmJpZ2h0cykge1xuICAgICAgICAgICAgdGhyb3cgXCJ0aGUgcGFydHMgYW5kIGJpZ2h0cyBib3RoIG11c3QgYmUgZ3JlYXRlciB0aGFuIDBcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2NkKHRoaXMucGFydHMsIHRoaXMuYmlnaHRzKSAhPSAxKSB7XG4gICAgICAgICAgICB0aHJvdyBcInRoZSBwYXJ0cyBhbmQgYmlnaHRzIG11c3QgaGF2ZSBhIGdyZWF0ZXN0IGNvbW1vbiBkaXZpc29yIG9mIDFcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmaWxsQ29kaW5nKCkge1xuICAgICAgICB0aGlzLmNvZGluZyA9ICcnO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGFydHMgLSAxOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuY29kaW5nICs9IHRoaXMucGF0dGVybltpICUgdGhpcy5wYXR0ZXJuLmxlbmd0aF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5pdFZhcnMoKSB7XG4gICAgICAgIHRoaXMucmVtYWluZGVyID0gdGhpcy5wYXJ0cyAlIHRoaXMuYmlnaHRzO1xuICAgICAgICB0aGlzLmNvdW50VmFsdWUgPSB0aGlzLmJpZ2h0cyAtIHRoaXMucmVtYWluZGVyO1xuICAgICAgICB0aGlzLmN5Y2xpY0JpZ2h0TnVtYmVyID0gW107XG4gICAgICAgIHRoaXMudG9wQ3ljbGljQmlnaHROdW1iZXIgPSBbXTtcbiAgICAgICAgdGhpcy5ib3RDeWNsaWNCaWdodE51bWJlciA9IFtdO1xuICAgICAgICB0aGlzLnRvcENvZGluZ1BhdHRlcm4gPSBbXTtcbiAgICAgICAgdGhpcy5ib3RDb2RpbmdQYXR0ZXJuID0gW107XG4gICAgICAgIHRoaXMuaGFsZkN5Y2xlcyA9IFtdO1xuICAgICAgICB0aGlzLnBpbnMgPSBbXTtcbiAgICB9XG4gICAgZmlsbENibigpIHtcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLmJpZ2h0czsgYysrKSB7XG4gICAgICAgICAgICB0aGlzLmN5Y2xpY0JpZ2h0TnVtYmVyWyhjICogdGhpcy5jb3VudFZhbHVlKSAlIHRoaXMuYmlnaHRzXSA9IGM7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLnBhcnRzIC0gMTsgYysrKSB7XG4gICAgICAgICAgICB0aGlzLnRvcEN5Y2xpY0JpZ2h0TnVtYmVyW2NdID0gdGhpcy5jeWNsaWNCaWdodE51bWJlclsoYyArIDEpICUgdGhpcy5iaWdodHNdO1xuICAgICAgICAgICAgdGhpcy5ib3RDeWNsaWNCaWdodE51bWJlclt0aGlzLnBhcnRzIC0gMSAtIGMgLSAxXSA9IHRoaXMuY3ljbGljQmlnaHROdW1iZXJbKGMgKyAxKSAlIHRoaXMuYmlnaHRzXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRQYXJ0RnJvbVR5cGUoaXNPdmVyKSB7XG4gICAgICAgIHJldHVybiBpc092ZXJcbiAgICAgICAgICAgID8gdGhpcy5zb2JyZSA/ICdVJyA6ICdPJ1xuICAgICAgICAgICAgOiB0aGlzLnNvYnJlID8gJ08nIDogJ1UnO1xuICAgIH1cbiAgICBmaWxsVW8oKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wYXJ0cyAtIDE7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgaXNPdmVyID0gKHRoaXMuY29kaW5nW2ldID09PSAnXFxcXCcpO1xuICAgICAgICAgICAgdGhpcy50b3BDb2RpbmdQYXR0ZXJuLnB1c2godGhpcy5nZXRQYXJ0RnJvbVR5cGUoIWlzT3ZlcikpO1xuICAgICAgICAgICAgdGhpcy5ib3RDb2RpbmdQYXR0ZXJuLnB1c2godGhpcy5nZXRQYXJ0RnJvbVR5cGUoaXNPdmVyKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmlsbFBpbnMoKSB7XG4gICAgICAgIHRoaXMucGlucy5wdXNoKDEpO1xuICAgICAgICBsZXQgbSA9IDIgKiB0aGlzLmJpZ2h0cztcbiAgICAgICAgaWYgKHRoaXMucGFydHMgJSAyKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IG07IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSAoaSAqIHRoaXMucGFydHMpICUgbTtcbiAgICAgICAgICAgICAgICB0aGlzLnBpbnMucHVzaChNYXRoLmZsb29yKHIgLyAyKSArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBtOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gKGkgKiB0aGlzLnBhcnRzKSAlIG07XG4gICAgICAgICAgICAgICAgdGhpcy5waW5zLnB1c2goTWF0aC5mbG9vcihyID09PSAwXG4gICAgICAgICAgICAgICAgICAgID8gKChpICogdGhpcy5wYXJ0cyArIDEpICUgbSkgLyAyXG4gICAgICAgICAgICAgICAgICAgIDogaSAlIDJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gciAvIDJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogKHIgKyAxKSAvIDIpICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5waW5zLnB1c2goMSk7XG4gICAgfVxuICAgIDtcbiAgICBmaWxsSGFsZkN5Y2xlcygpIHtcbiAgICAgICAgbGV0IGhjID0gbmV3IEhhbGZDeWNsZSh0aGlzLnBpbnNbMF0sIHRoaXMucGluc1sxXSk7XG4gICAgICAgIHRoaXMuaGFsZkN5Y2xlcy5wdXNoKGhjKTtcbiAgICAgICAgZm9yIChsZXQgbnVtID0gMjsgbnVtIDw9IDIgKiB0aGlzLmJpZ2h0czsgbnVtKyspIHtcbiAgICAgICAgICAgIGhjID0gbmV3IEhhbGZDeWNsZSh0aGlzLnBpbnNbbnVtIC0gMV0sIHRoaXMucGluc1tudW1dKTtcbiAgICAgICAgICAgIGNvbnN0IGN5Y2xpY0JpZ2h0TnVtYmVyID0gKG51bSAtIDIgLSAobnVtICUgMikpIC8gMjtcbiAgICAgICAgICAgIGNvbnN0IFtjb2RpbmdQYXR0ZXJuLCBzaWRlXSA9IG51bSAlIDJcbiAgICAgICAgICAgICAgICA/IFt0aGlzLnRvcENvZGluZ1BhdHRlcm4sIHRoaXMudG9wQ3ljbGljQmlnaHROdW1iZXJdXG4gICAgICAgICAgICAgICAgOiBbdGhpcy5ib3RDb2RpbmdQYXR0ZXJuLCB0aGlzLmJvdEN5Y2xpY0JpZ2h0TnVtYmVyXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29kaW5nUGF0dGVybi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChzaWRlW2ldIDw9IGN5Y2xpY0JpZ2h0TnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGhjLmFwcGVuZChjb2RpbmdQYXR0ZXJuW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmhhbGZDeWNsZXMucHVzaChoYyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc29sdmUoKSB7XG4gICAgICAgIHRoaXMuY2hlY2tDb25kaXRpb25zKCk7XG4gICAgICAgIHRoaXMuZmlsbENvZGluZygpO1xuICAgICAgICB0aGlzLmluaXRWYXJzKCk7XG4gICAgICAgIHRoaXMuZmlsbENibigpO1xuICAgICAgICB0aGlzLmZpbGxVbygpO1xuICAgICAgICB0aGlzLmZpbGxQaW5zKCk7XG4gICAgICAgIHRoaXMuZmlsbEhhbGZDeWNsZXMoKTtcbiAgICB9XG4gICAgc3RlcHMoKSB7XG4gICAgICAgIGxldCBsaXN0ID0gW107XG4gICAgICAgIGxldCBhdFRvcCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGNvbnN0IGhhbGZDeWNsZSBvZiB0aGlzLmhhbGZDeWNsZXMpIHtcbiAgICAgICAgICAgIGxpc3QucHVzaChgJHthdFRvcCA/ICd0b3AnIDogJ2JvdCd9IHBpbiAke2hhbGZDeWNsZS5mcm9tUGlufSB0byAke2F0VG9wID8gJ2JvdCcgOiAndG9wJ30gcGluICR7aGFsZkN5Y2xlLnRvUGlufTogJHtoYWxmQ3ljbGUuc3RlcHMoKSA/PyAnZnJlZSBydW4nfWApO1xuICAgICAgICAgICAgYXRUb3AgPSAhYXRUb3A7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgc2lnbmFsIH0gZnJvbSAnQHByZWFjdC9zaWduYWxzLXJlYWN0JztcbmltcG9ydCB7IEtub3QgfSBmcm9tICcuLi9saWInO1xuZXhwb3J0IGNvbnN0IEN1cnJlbnRLbm90ID0gc2lnbmFsKG5ldyBLbm90KHtcbiAgICBiaWdodHM6IDYsIHBhcnRzOiA1XG59KSk7XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBLbm90IH0gZnJvbSAnLi4vbGliJztcbmltcG9ydCB7IEN1cnJlbnRLbm90IH0gZnJvbSAnLi4vZGF0YS9DdXJyZW50S25vdCc7XG5leHBvcnQgY29uc3QgS25vdENvbnRyb2xzID0gKCkgPT4ge1xuICAgIGNvbnN0IFt7IGJpZ2h0cywgcGFydHMsIHNvYnJlLCBwYXR0ZXJuLCB9LCBzZXRQcm9wc10gPSBSZWFjdC51c2VTdGF0ZSh7XG4gICAgICAgIGJpZ2h0czogNixcbiAgICAgICAgcGFydHM6IDUsXG4gICAgICAgIHNvYnJlOiBmYWxzZSxcbiAgICAgICAgcGF0dGVybjogJ1xcXFwvJyxcbiAgICB9KTtcbiAgICBjb25zdCBbbXNnLCBzZXRNc2ddID0gUmVhY3QudXNlU3RhdGUoJycpO1xuICAgIGNvbnN0IGNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChrZXksIGUpID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSAvcGF0dGVybi8udGVzdChrZXkpXG4gICAgICAgICAgICA/IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICA6IC9zb2JyZS8udGVzdChrZXkpXG4gICAgICAgICAgICAgICAgPyBlLnRhcmdldC5jaGVja2VkXG4gICAgICAgICAgICAgICAgOiBlLnRhcmdldC52YWx1ZUFzTnVtYmVyO1xuICAgICAgICBzZXRQcm9wcygocHJldikgPT4gKHsgLi4ucHJldiwgW2tleV06IHZhbHVlIH0pKTtcbiAgICB9LCBbc2V0UHJvcHNdKTtcbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2V0TXNnKCcnKTtcbiAgICAgICAgICAgIEN1cnJlbnRLbm90LnZhbHVlID0gbmV3IEtub3QoeyBiaWdodHMsIHBhcnRzLCBzb2JyZSwgcGF0dGVybiB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBzZXRNc2coZXJyLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgfSwgW2JpZ2h0cywgcGFydHMsIHNvYnJlLCBwYXR0ZXJuXSk7XG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCBudWxsLFxuICAgICAgICAgICAgXCJCaWdodHNcIixcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7IHR5cGU6ICdudW1iZXInLCB2YWx1ZTogYmlnaHRzLCBvbkNoYW5nZTogKGUpID0+IGNoYW5nZSgnYmlnaHRzJywgZSkgfSkpLFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIiwgbnVsbCxcbiAgICAgICAgICAgIFwiUGFydHNcIixcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7IHR5cGU6ICdudW1iZXInLCB2YWx1ZTogcGFydHMsIG9uQ2hhbmdlOiAoZSkgPT4gY2hhbmdlKCdwYXJ0cycsIGUpIH0pKSxcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImxhYmVsXCIsIG51bGwsXG4gICAgICAgICAgICBcIlNvYnJlXCIsXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgeyB0eXBlOiAnY2hlY2tib3gnLCBjaGVja2VkOiBzb2JyZSwgb25DaGFuZ2U6IChlKSA9PiBjaGFuZ2UoJ3NvYnJlJywgZSkgfSkpLFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIiwgbnVsbCxcbiAgICAgICAgICAgIFwiUGF0dGVyblwiLFxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogcGF0dGVybiwgb25DaGFuZ2U6IChlKSA9PiBjaGFuZ2UoJ3BhdHRlcm4nLCBlKSB9KSksXG4gICAgICAgIG1zZyAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiaDRcIiwgbnVsbCwgbXNnKSkpO1xufTtcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xuZXhwb3J0IGNvbnN0IEFsZ29yaXRobURpYWdyYW0gPSAoeyBrbm90OiB7IHRvcEN5Y2xpY0JpZ2h0TnVtYmVyLCBib3RDeWNsaWNCaWdodE51bWJlciwgdG9wQ29kaW5nUGF0dGVybiwgYm90Q29kaW5nUGF0dGVybiwgY29kaW5nIH0gfSkgPT4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCxcbiAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiaDNcIiwgbnVsbCwgXCJBbGdvcml0aG0gRGlhZ3JhbVwiKSxcbiAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwidGFibGVcIiwgbnVsbCxcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcInRib2R5XCIsIG51bGwsXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFJvdywgeyBpdGVtczogdG9wQ29kaW5nUGF0dGVybiB9KSxcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm93LCB7IGl0ZW1zOiB0b3BDeWNsaWNCaWdodE51bWJlciB9KSxcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm93LCB7IGl0ZW1zOiBjb2Rpbmcuc3BsaXQoXCJcIikgfSksXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFJvdywgeyBpdGVtczogYm90Q3ljbGljQmlnaHROdW1iZXIgfSksXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFJvdywgeyBpdGVtczogYm90Q29kaW5nUGF0dGVybiB9KSkpKSk7XG5jb25zdCBDZWxsID0gc3R5bGVkLnRkLndpdGhDb25maWcoeyBkaXNwbGF5TmFtZTogXCJDZWxsXCIsIGNvbXBvbmVudElkOiBcInNjLTFibWJmOGhcIiB9KSBgXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbmA7XG5jb25zdCBSb3cgPSAoeyBpdGVtcyB9KSA9PiAoUmVhY3QuY3JlYXRlRWxlbWVudChcInRyXCIsIG51bGwsIGl0ZW1zLm1hcCgoaXRlbSwgY29sKSA9PiAoUmVhY3QuY3JlYXRlRWxlbWVudChDZWxsLCB7IGtleTogYCR7Y29sfS0ke2l0ZW19YCB9LCBpdGVtKSkpKSk7XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcbmV4cG9ydCBjb25zdCBSdW5MaXN0ID0gKHsga25vdCB9KSA9PiAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLFxuICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJoM1wiLCBudWxsLCBcIkhhbGYgQ3ljbGVzXCIpLFxuICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSGFsZkN5Y2xlTGlzdCwgbnVsbCwga25vdC5zdGVwcygpLm1hcCgocm93KSA9PiAoUmVhY3QuY3JlYXRlRWxlbWVudChIYWxmQ3ljbGVSb3csIHsga2V5OiByb3cgfSwgcm93KSkpKSkpO1xuY29uc3QgSGFsZkN5Y2xlTGlzdCA9IHN0eWxlZC5vbC53aXRoQ29uZmlnKHsgZGlzcGxheU5hbWU6IFwiSGFsZkN5Y2xlTGlzdFwiLCBjb21wb25lbnRJZDogXCJzYy0xY2ZuaGZlXCIgfSkgYGA7XG5jb25zdCBIYWxmQ3ljbGVSb3cgPSBzdHlsZWQubGkud2l0aENvbmZpZyh7IGRpc3BsYXlOYW1lOiBcIkhhbGZDeWNsZVJvd1wiLCBjb21wb25lbnRJZDogXCJzYy0xYXdiOWNvXCIgfSkgYGA7XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBDdXJyZW50S25vdCB9IGZyb20gJy4uL2RhdGEvQ3VycmVudEtub3QnO1xuaW1wb3J0IHsgQWxnb3JpdGhtRGlhZ3JhbSB9IGZyb20gJy4vQWxnb3JpdGhtRGlhZ3JhbSc7XG5pbXBvcnQgeyBSdW5MaXN0IH0gZnJvbSAnLi9SdW5MaXN0JztcbmV4cG9ydCBjb25zdCBLbm90RGlzcGxheSA9ICgpID0+IHtcbiAgICBjb25zdCBrbm90ID0gQ3VycmVudEtub3QudmFsdWU7XG4gICAgcmV0dXJuIGtub3RcbiAgICAgICAgPyAoUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCxcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQWxnb3JpdGhtRGlhZ3JhbSwgeyBrbm90OiBrbm90IH0pLFxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChSdW5MaXN0LCB7IGtub3Q6IGtub3QgfSkpKVxuICAgICAgICA6ICcnO1xufTtcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGNyZWF0ZVJvb3QgfSBmcm9tICdyZWFjdC1kb20vY2xpZW50JztcbmltcG9ydCB7IEFwcCB9IGZyb20gJy4vQXBwJztcbmNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlY3Rpb24nKTtcbmNvbnN0IHJvb3QgPSBjcmVhdGVSb290KGNvbnRhaW5lcik7XG5jb25zdCBlbGVtZW50ID0gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuU3RyaWN0TW9kZSwgbnVsbCxcbiAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEFwcCwgbnVsbCkpKTtcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbnJvb3QucmVuZGVyKGVsZW1lbnQpO1xuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgS25vdENvbnRyb2xzIH0gZnJvbSAnLi9jb21wb25lbnRzL0tub3RDb250cm9scyc7XG5pbXBvcnQgeyBLbm90RGlzcGxheSB9IGZyb20gJy4vY29tcG9uZW50cy9Lbm90RGlzcGxheSc7XG5leHBvcnQgY29uc3QgQXBwID0gKCkgPT4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCxcbiAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEtub3RDb250cm9scywgbnVsbCksXG4gICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImhyXCIsIG51bGwpLFxuICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoS25vdERpc3BsYXksIG51bGwpKSk7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIG5vIGJhc2VVUklcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQ0ODM6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gKGNodW5rSWQpID0+IChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDApO1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IChwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkgPT4ge1xuXHR2YXIgW2NodW5rSWRzLCBtb3JlTW9kdWxlcywgcnVudGltZV0gPSBkYXRhO1xuXHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcblx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG5cdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDA7XG5cdGlmKGNodW5rSWRzLnNvbWUoKGlkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2lkXSAhPT0gMCkpKSB7XG5cdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihydW50aW1lKSB2YXIgcmVzdWx0ID0gcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0fVxuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKCk7XG5cdFx0fVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG5cdH1cblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uTyhyZXN1bHQpO1xufVxuXG52YXIgY2h1bmtMb2FkaW5nR2xvYmFsID0gc2VsZltcIndlYnBhY2tDaHVua2tub3RzXCJdID0gc2VsZltcIndlYnBhY2tDaHVua2tub3RzXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm5jID0gdW5kZWZpbmVkOyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgZGVwZW5kcyBvbiBvdGhlciBsb2FkZWQgY2h1bmtzIGFuZCBleGVjdXRpb24gbmVlZCB0byBiZSBkZWxheWVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyh1bmRlZmluZWQsIFsyMTZdLCAoKSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXyg5MjApKSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsiZGVmZXJyZWQiLCJIYWxmQ3ljbGUiLCJjb25zdHJ1Y3RvciIsImZyb21QaW4iLCJ0b1BpbiIsInRoaXMiLCJydW5zIiwiYXBwZW5kIiwic3RlcCIsInB1c2giLCJzdGVwcyIsImxpc3QiLCJpIiwibGVuZ3RoIiwiY29kaW5nUGF0dGVybiIsImNvdW50Iiwic3RycyIsImpvaW4iLCJnY2QiLCJ4IiwieSIsIktub3QiLCJwYXJ0cyIsImJpZ2h0cyIsInNvYnJlIiwicGF0dGVybiIsInNvbHZlIiwiY2hlY2tDb25kaXRpb25zIiwiZmlsbENvZGluZyIsImNvZGluZyIsImluaXRWYXJzIiwicmVtYWluZGVyIiwiY291bnRWYWx1ZSIsImN5Y2xpY0JpZ2h0TnVtYmVyIiwidG9wQ3ljbGljQmlnaHROdW1iZXIiLCJib3RDeWNsaWNCaWdodE51bWJlciIsInRvcENvZGluZ1BhdHRlcm4iLCJib3RDb2RpbmdQYXR0ZXJuIiwiaGFsZkN5Y2xlcyIsInBpbnMiLCJmaWxsQ2JuIiwiYyIsImdldFBhcnRGcm9tVHlwZSIsImlzT3ZlciIsImZpbGxVbyIsImZpbGxQaW5zIiwibSIsInIiLCJNYXRoIiwiZmxvb3IiLCJmaWxsSGFsZkN5Y2xlcyIsImhjIiwibnVtIiwic2lkZSIsImF0VG9wIiwiaGFsZkN5Y2xlIiwiQ3VycmVudEtub3QiLCJLbm90Q29udHJvbHMiLCJzZXRQcm9wcyIsIm1zZyIsInNldE1zZyIsImNoYW5nZSIsImtleSIsImUiLCJ2YWx1ZSIsInRlc3QiLCJ0YXJnZXQiLCJjaGVja2VkIiwidmFsdWVBc051bWJlciIsInByZXYiLCJlcnIiLCJ0b1N0cmluZyIsInR5cGUiLCJvbkNoYW5nZSIsIkFsZ29yaXRobURpYWdyYW0iLCJrbm90IiwiUm93IiwiaXRlbXMiLCJzcGxpdCIsIkNlbGwiLCJ0ZCIsIndpdGhDb25maWciLCJkaXNwbGF5TmFtZSIsImNvbXBvbmVudElkIiwibWFwIiwiaXRlbSIsImNvbCIsIlJ1bkxpc3QiLCJIYWxmQ3ljbGVMaXN0Iiwicm93IiwiSGFsZkN5Y2xlUm93Iiwib2wiLCJsaSIsIktub3REaXNwbGF5IiwiY29udGFpbmVyIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwicm9vdCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInJlbmRlciIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiTyIsInJlc3VsdCIsImNodW5rSWRzIiwiZm4iLCJwcmlvcml0eSIsIm5vdEZ1bGZpbGxlZCIsIkluZmluaXR5IiwiZnVsZmlsbGVkIiwiaiIsIk9iamVjdCIsImtleXMiLCJldmVyeSIsInNwbGljZSIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpbnN0YWxsZWRDaHVua3MiLCJjaHVua0lkIiwid2VicGFja0pzb25wQ2FsbGJhY2siLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsImRhdGEiLCJtb3JlTW9kdWxlcyIsInJ1bnRpbWUiLCJzb21lIiwiaWQiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJzZWxmIiwiZm9yRWFjaCIsImJpbmQiLCJuYyIsIl9fd2VicGFja19leHBvcnRzX18iXSwic291cmNlUm9vdCI6IiJ9